name: Terraform Init
description: Initialize Terraform with backend configuration

inputs:
  working_directory:
    description: 'Working directory for Terraform'
    required: true
  resource_group:
    description: 'Backend storage resource group'
    required: true
  storage_account:
    description: 'Backend storage account name'
    required: true
  container_name:
    description: 'Backend storage container name'
    required: true
  state_key:
    description: 'Backend state file key'
    required: true

runs:
  using: composite
  steps:
    - name: Terraform Init
      shell: bash
      working-directory: ${{ inputs.working_directory }}
      run: |
        terraform init \
          -backend-config="resource_group_name=${{ inputs.resource_group }}" \
          -backend-config="storage_account_name=${{ inputs.storage_account }}" \
          -backend-config="container_name=${{ inputs.container_name }}" \
          -backend-config="key=${{ inputs.state_key }}"
